<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= @page_title ? "#{@page_title} · PSP-Asia" : "PSP-Asia" %></title>
    <link rel="stylesheet" href="/css/app.css" />
    <% (@get_styles || []).each do |href| %>
      <link rel="stylesheet" href="<%= href %>" />
    <% end %>
  </head>
  <body>
    <%= erb :header %>

    <main>
      <%= yield %>
    </main>

    <%= erb :footer %>
    <script>
      // Theme switcher functionality
      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        
        // Get saved theme or default to light
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        // Apply theme on load
        setTheme(currentTheme);
        
        // Toggle theme on button click (cycle: light → dark → light)
        themeToggle.addEventListener('click', function() {
          const current = document.documentElement.getAttribute('data-theme');
          let newTheme;
          if (current === 'light') {
            newTheme = 'dark';
          } else {
            newTheme = 'light';
          }
          setTheme(newTheme);
          localStorage.setItem('theme', newTheme);
        });
        
        function setTheme(theme) {
          document.documentElement.setAttribute('data-theme', theme);
          
          if (theme === 'dark') {
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
          } else {
            moonIcon.classList.add('hidden');
            sunIcon.classList.remove('hidden');
          }
        }
      });
    </script>
    <% (@get_scripts || []).each do |src| %>
      <script src="<%= src %>"></script>
    <% end %>
  </body>
  </html>



